# Software Desing für Brainstorming 2

Unsere Anwendung unterteilt sich in einen Server und einen Client. Serverseitig stellen wir eine WebScoket API zur Kommunikation zur verfügung. Die Websocket API verteilt die verschiedenen Events auf dem Canvas (wie zum Beispiel Zeichnung, hinzufügen und manipulieren von Objekten), die Chatnachrichten, sowie neue Literatureinträge zwischen den verbundenen Teilnehmer:innen. Außerdem übernimmt sie die nicht-echtzeit Aufgaben, die normalerweiße eine REST-API übernimmt, um das Interface einfach zu halten. Für die Echtzeitkommunikation haben wir uns für Socket.io als Abstraktion von Websockets entschieden und nicht für speziellere Frameworks, da Socket.io weit verbreitet ist und sowohl eine solide Dokumentation als auch Hilfe und Tutorials online hat. Die verschiedenen Räume wollen wir mit der Room API von Socket.IO umsetzen. Datenstrukturen und die unterstützen Events ("API Endpunkte") sind als Typescript Interfaces [hier](https://github.com/UniRegensburg/mme-ws2020-projekte-brainstorming-2/tree/dev/server/src/interfaces) dokumentiert.

Die Räume sowie das Literaturverzeichnis sollen in einer Datenbank persistiert werden. Dazu nutzen wir TypeORM, um die Metadaten und Einträge im Literaturverzeichnis speichern zu können. Das ermöglicht uns, mit geringem Aufwand die tatsächliche Datenbank zu ändern. Speicherung des Literaturverzeichnisses soll automatisch bei jedem Eintrag geschehen (Events), das Whiteboard muss manuell gespeichert werden.

Clientseitig nutzen wir Fabric.JS um auf dem Whiteboard Manipulation umzusetzen und den State des Boards zur Speicherung zu erhalten. Jede Manipulation wird über den Socket.IO Client mit den anderen verbundenen Teilnehmer:innen geteilt. Ebenso wird jede hinzugefügte Quelle und Chatnachrichten über den Websocket verteilt. Der Client unterteilt sich dabei in ein Logikmodul, welches die Kommunikation mit dem Server herstellt und Events weitergibt, und einem UI Modul, welches Events vom Logikmodul grafisch umsetzt und eigene Änderungen an das Logikmodul zur Kommunikation weitergibt. Beide Bereiche sollen über einen gemeinsamen Event-Bus kommunizieren. 
